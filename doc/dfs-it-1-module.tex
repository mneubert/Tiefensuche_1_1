\begin{tabbing}\label{dfs-it-1-module}%
dfs-it-1 = \\
{\bf mod}\={\bf ule}\+\\
{\bf export} digraph-dfs-proc\\
{\bf ref}\={\bf inement}\+\\
{\bf rep}\= {\bf resentation of operations}\+\\
\begin{tabular}{lcl}
deptSearchP\# & implements & deptSearchP;
\end{tabular}\-\\

\\
{\bf implementation}\\
{\bf import} digraph-path\\
\\
{\bf vari}\={\bf ables}\+\\
open, close: list;\\
bbool: bool;\\
\Var{n}{0}: nat;\\
\Var{a}{0}: elem;
\-\\
\\

               {\bf declaration}
\end{tabbing}

{\parindent1cm 
deptSearchP\#(a, z, g; {\bf var} bbool) \\
{\bf \{}\\
{\bf var} open = [] + a, close = [], \Var{n}{0} = 0, \Var{a}{0} = a {\bf in}\\
{\bf \{}\\
\tabbe bbool := false;\\
\tabbe \Var{n}{0} := getM(a, g) + 1;\\
\tabbe {\bf if} \Not (a ' = [] \Or z = []) {\bf then}\\
\tabbe \tabif\  {\bf if} a $\in$ z {\bf then} bbool := true {\bf else}\\
\tabbe \tabif\  {\bf \{}\\
\tabbe \tabif\ \tabbe {\bf while} \Var{n}{0} $>$ 0 \And (bbool \Equiv false) \And (open $\neq$ []) {\bf do}\\
\tabbe \tabif\ \tabbe \tab{wh} {\bf \{}\\
\tabbe \tabif\ \tabbe \tab{wh}\tabbe \Var{a}{0} := open.first;\\
\tabbe \tabif\ \tabbe \tab{wh}\tabbe {\bf if} \Var{a}{0} $\in$ z {\bf then} bbool := true {\bf else}\\
\tabbe \tabif\ \tabbe \tab{wh}\tabbe  {\bf \{}\\
\tabbe \tabif\ \tabbe \tab{wh}\tabbe \tabbe \Var{n}{0} := \Var{n}{0} - 1;\\
\tabbe \tabif\ \tabbe \tab{wh}\tabbe \tabbe close := \Var{a}{0} ' + close;\\
\tabbe \tabif\ \tabbe \tab{wh}\tabbe \tabbe open := set2list(outsortSuccs(\Var{a}{0}, list2set(close), g)) + open.rest\\
\tabbe \tabif\ \tabbe \tab{wh}\tabbe {\bf \}}\\
\tabbe \tabif\ \tabbe \tab{wh}{\bf \}};\\
\tabbe \tabif\ \tabbe {\bf if} \Var{n}{0} = 0 {\bf then} bbool := false\\
\tabbe \tabif\ {\bf \}}\\
{\bf \}}\\
{\bf \}}
}



\bigskip

{\bf uniform restriction declarations:}

deptSearchP\#(a, z, g; {\bf var} bbool) \\
\{\\
{\bf let} open = [] + a, close = [], \Var{n}{0} = 0, \Var{a}{0} = a {\bf in}\\
{\bf \{}\\
\tabbe bbool := false;\\
\tabbe \Var{n}{0} := getM(a, g) + 1;\\
\tabbe {\bf if} \Not (a ' = [] \Or z = []) {\bf then}\\
\tabbe \tabif\  {\bf if} a $\in$ z {\bf then} bbool := true {\bf else}\\
\tabbe \tabif\  {\bf \{}\\
\tabbe \tabif\ \tabbe {\bf while} \Var{n}{0} $>$ 0 \And (bbool \Equiv false) \And (open $\neq$ []) {\bf do}\\
\tabbe \tabif\ \tabbe \tab{wh} {\bf \{}\\
\tabbe \tabif\ \tabbe \tab{wh}\tabbe \Var{a}{0} := open.first;\\
\tabbe \tabif\ \tabbe \tab{wh}\tabbe {\bf if} \Var{a}{0} $\in$ z {\bf then} bbool := true {\bf else}\\
\tabbe \tabif\ \tabbe \tab{wh}\tabbe  {\bf \{}\\
\tabbe \tabif\ \tabbe \tab{wh}\tabbe \tabbe \Var{n}{0} := \Var{n}{0} - 1;\\
\tabbe \tabif\ \tabbe \tab{wh}\tabbe \tabbe close := \Var{a}{0} ' + close;\\
\tabbe \tabif\ \tabbe \tab{wh}\tabbe \tabbe open := set2list(outsortSuccs(\Var{a}{0}, list2set(close), g)) + open.rest\\
\tabbe \tabif\ \tabbe \tab{wh}\tabbe {\bf \}}\\
\tabbe \tabif\ \tabbe \tab{wh}{\bf \}};\\
\tabbe \tabif\ \tabbe {\bf if} \Var{n}{0} = 0 {\bf then} bbool := false\\
\tabbe \tabif\ {\bf \}}\\
{\bf \}}\\
\}

\bigskip



\par\mbox{}\hrulefill\mbox{}\par